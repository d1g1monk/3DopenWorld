[gd_scene load_steps=18 format=3 uid="uid://dlcrbeat0g2fe"]

[ext_resource type="PackedScene" uid="uid://bksd57feoebxh" path="res://scenes/entlties/enemy/enemy.tscn" id="1_l8mix"]
[ext_resource type="Script" uid="uid://dvbd3gxchpa0j" path="res://scenes/entlties/enemy/boss.gd" id="2_bun6i"]
[ext_resource type="PackedScene" uid="uid://bgthd3k5kyak7" path="res://graphics/characters/nagonford/Nagonford_Animated.glb" id="2_kejr5"]

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_kejr5"]
radius = 1.109375
height = 6.1086426

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_7ueeq"]
animation = &"2H_Melee_Attack_Spinning"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_5ufr6"]
animation = &"1H_Melee_Attack_Slice_Horizontal"

[sub_resource type="AnimationNodeOneShot" id="AnimationNodeOneShot_7ueeq"]
fadein_time = 0.2
fadeout_time = 0.2

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_bun6i"]
animation = &"2H_Melee_Idle"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_gh31j"]
animation = &"Walking_A"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_5ufr6"]

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_7ueeq"]

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_86ya2"]

[sub_resource type="AnimationNodeStateMachine" id="AnimationNodeStateMachine_bun6i"]
states/End/position = Vector2(733, 89)
states/Idle/node = SubResource("AnimationNodeAnimation_bun6i")
states/Idle/position = Vector2(367, 100)
states/Walk/node = SubResource("AnimationNodeAnimation_gh31j")
states/Walk/position = Vector2(576, 100)
transitions = ["Idle", "Walk", SubResource("AnimationNodeStateMachineTransition_5ufr6"), "Walk", "Idle", SubResource("AnimationNodeStateMachineTransition_7ueeq"), "Start", "Idle", SubResource("AnimationNodeStateMachineTransition_86ya2")]
graph_offset = Vector2(81, -5)

[sub_resource type="AnimationNodeBlend2" id="AnimationNodeBlend2_86ya2"]

[sub_resource type="AnimationNodeTimeScale" id="AnimationNodeTimeScale_bun6i"]

[sub_resource type="AnimationNodeBlendTree" id="AnimationNodeBlendTree_bun6i"]
graph_offset = Vector2(-471.44778, -32.47152)
nodes/output/position = Vector2(1180, 180)
nodes/MoveStateMachine/node = SubResource("AnimationNodeStateMachine_bun6i")
nodes/MoveStateMachine/position = Vector2(-226.89124, -8.768788)
nodes/AttackAnimation/node = SubResource("AnimationNodeAnimation_5ufr6")
nodes/AttackAnimation/position = Vector2(-224.28893, 282.41367)
nodes/AttackOneShot/node = SubResource("AnimationNodeOneShot_7ueeq")
nodes/AttackOneShot/position = Vector2(287.69232, 65.57457)
nodes/TimeScale/node = SubResource("AnimationNodeTimeScale_bun6i")
nodes/TimeScale/position = Vector2(960, 160)
nodes/Animation/node = SubResource("AnimationNodeAnimation_7ueeq")
nodes/Animation/position = Vector2(300, 460)
nodes/SpinBlend/node = SubResource("AnimationNodeBlend2_86ya2")
nodes/SpinBlend/position = Vector2(720, 100)
node_connections = [&"output", 0, &"TimeScale", &"AttackOneShot", 0, &"MoveStateMachine", &"AttackOneShot", 1, &"AttackAnimation", &"TimeScale", 0, &"SpinBlend", &"SpinBlend", 0, &"AttackOneShot", &"SpinBlend", 1, &"Animation"]

[sub_resource type="SphereShape3D" id="SphereShape3D_bun6i"]
radius = 3.4216506

[node name="Boss" instance=ExtResource("1_l8mix")]
collision_mask = 7
script = ExtResource("2_bun6i")
spin_speed = 6
attack_radius = 5.0

[node name="CollisionShape3D" parent="." index="0"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 3.0049744, 0)
shape = SubResource("CapsuleShape3D_kejr5")

[node name="Skin" parent="." index="1" instance=ExtResource("2_kejr5")]
transform = Transform3D(3, 0, 0, 0, 3, 0, 0, 0, 3, -1.1381584, 1.3833389, 0)

[node name="Rig" parent="Skin" index="0"]
transform = Transform3D(-4.371139e-08, 0, 1, 0, 1, 0, -1, 0, -4.371139e-08, 0.38000488, -0.47191906, -0.008830214)

[node name="Nagonford_Axe" parent="Skin/Rig/Skeleton3D/Nagonford_Axe" index="0"]
transform = Transform3D(1, 0, 0, 0, 0.8660254, -0.5, 0, 0.5, 0.8660254, 0, 0, 0)

[node name="AnimationTree" parent="." index="2"]
root_node = NodePath("../Skin")
tree_root = SubResource("AnimationNodeBlendTree_bun6i")
anim_player = NodePath("../Skin/AnimationPlayer")
parameters/AttackOneShot/active = false
parameters/AttackOneShot/internal_active = false
parameters/AttackOneShot/request = 0
parameters/TimeScale/scale = 0.5
parameters/SpinBlend/blend_amount = 0.0

[node name="AttackTimer" parent="Timers" index="0"]
wait_time = 5.0
autostart = true

[node name="Area3D" type="Area3D" parent="." index="4"]
collision_layer = 0
collision_mask = 4

[node name="CollisionShape3D" type="CollisionShape3D" parent="Area3D" index="0"]
shape = SubResource("SphereShape3D_bun6i")

[connection signal="timeout" from="Timers/AttackTimer" to="." method="_on_attack_timer_timeout"]
[connection signal="body_entered" from="Area3D" to="." method="_on_area_3d_body_entered"]

[editable path="Skin"]
